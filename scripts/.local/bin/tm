#!/bin/bash
# Project launcher - Start or attach to tmuxinator project

if [ -z "$1" ]; then
  # No argument: show fuzzy finder of all projects
  project=$(tmuxinator list -n | tail -n +2 | fzf --prompt="Select project: " --height=40%)
  [ -z "$project" ] && exit 0
else
  project="$1"
fi

# Check if session already exists
if tmux has-session -t "$project" 2>/dev/null; then
  # Session exists, attach or switch
  if [ -z "$TMUX" ]; then
    tmux attach-session -t "$project"
  else
    tmux switch-client -t "$project"
  fi
else
  # Session doesn't exist, start with tmuxinator
  tmuxinator start "$project"
fi
